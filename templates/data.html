<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Analytics - Yourl.Cloud</title>
    <meta name="description" content="Advanced data analytics and insights for Yourl.Cloud services">
    
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #ffd700;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.9);
            --bg-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            --bg-secondary: rgba(255, 255, 255, 0.1);
            --bg-tertiary: rgba(255, 255, 255, 0.15);
            --border-radius: 20px;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .header h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, var(--accent-color), #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .filters-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .filters-section h2 {
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }

        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-weight: 500;
            color: var(--accent-color);
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
        }

        .filter-actions {
            text-align: center;
            margin-top: 1rem;
        }

        .filter-button {
            background: var(--accent-color);
            color: #000;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            margin: 0 0.5rem;
        }

        .filter-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .filter-button.secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .metrics-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .metric-card {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease-out 0.4s both;
            text-align: center;
            transition: var(--transition);
        }

        .metric-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
        }

        .metric-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }

        .metric-label {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .data-visualization {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease-out 0.6s both;
        }

        .data-visualization h2 {
            color: var(--accent-color);
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.5rem;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-title {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            text-align: center;
        }

        .chart-placeholder {
            height: 250px;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            opacity: 0.7;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            text-align: center;
            padding: 1rem;
        }

        .data-table-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease-out 0.8s both;
        }

        .data-table-section h2 {
            color: var(--accent-color);
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.5rem;
        }

        .table-container {
            overflow-x: auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-table th {
            background: rgba(255, 255, 255, 0.1);
            color: var(--accent-color);
            font-weight: bold;
            position: sticky;
            top: 0;
        }

        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .export-section {
            text-align: center;
            margin-bottom: 3rem;
        }

        .export-button {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            margin: 0 0.5rem;
            font-size: 1rem;
        }

        .export-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .export-button.secondary {
            background: var(--warning-color);
        }

        .navigation {
            text-align: center;
            margin-top: 3rem;
        }

        .nav-button {
            display: inline-block;
            background: var(--bg-tertiary);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
            padding: 1rem 2rem;
            border-radius: 10px;
            text-decoration: none;
            margin: 0 0.5rem;
            transition: var(--transition);
            font-weight: 500;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .filter-controls {
                grid-template-columns: 1fr;
            }
            
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-overview {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
            }
            
            .nav-button {
                display: block;
                margin: 0.5rem auto;
                max-width: 200px;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid var(--accent-color);
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>📈 Data Analytics</h1>
            <p>Advanced insights and performance metrics for Yourl.Cloud services</p>
        </header>

        <!-- Filters Section -->
        <section class="filters-section">
            <h2>🔍 Data Filters</h2>
            <div class="filter-controls">
                <div class="filter-group">
                    <label for="timeRange">Time Range</label>
                    <select id="timeRange">
                        <option value="1h">Last Hour</option>
                        <option value="24h" selected>Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                        <option value="90d">Last 90 Days</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="dataType">Data Type</label>
                    <select id="dataType">
                        <option value="all" selected>All Data</option>
                        <option value="requests">API Requests</option>
                        <option value="errors">Error Logs</option>
                        <option value="performance">Performance Metrics</option>
                        <option value="users">User Activity</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="region">Region</label>
                    <select id="region">
                        <option value="all" selected>All Regions</option>
                        <option value="us-west1">US West 1</option>
                        <option value="us-central1">US Central 1</option>
                        <option value="us-east1">US East 1</option>
                        <option value="europe-west1">Europe West 1</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="service">Service</label>
                    <select id="service">
                        <option value="all" selected>All Services</option>
                        <option value="api">API Gateway</option>
                        <option value="auth">Authentication</option>
                        <option value="database">Database</option>
                        <option value="storage">Storage</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-actions">
                <button class="filter-button" onclick="applyFilters()">🚀 Apply Filters</button>
                <button class="filter-button secondary" onclick="resetFilters()">🔄 Reset</button>
            </div>
        </section>

        <!-- Key Metrics Overview -->
        <section class="metrics-overview">
            <div class="metric-card">
                <div class="metric-icon">📊</div>
                <div class="metric-value">{{ total_requests or "1.2M" }}</div>
                <div class="metric-label">Total Requests</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-icon">⚡</div>
                <div class="metric-value">{{ avg_response_time or "45ms" }}</div>
                <div class="metric-label">Avg Response Time</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-icon">🎯</div>
                <div class="metric-value">{{ success_rate or "99.8%" }}</div>
                <div class="metric-label">Success Rate</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-icon">👥</div>
                <div class="metric-value">{{ unique_users or "45.2K" }}</div>
                <div class="metric-label">Unique Users</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-icon">💾</div>
                <div class="metric-value">{{ data_processed or "2.1TB" }}</div>
                <div class="metric-label">Data Processed</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-icon">🚨</div>
                <div class="metric-value">{{ error_rate or "0.2%" }}</div>
                <div class="metric-label">Error Rate</div>
            </div>
        </section>

        <!-- Data Visualization -->
        <section class="data-visualization">
            <h2>📊 Data Visualization</h2>
            <div class="chart-grid">
                <div class="chart-card">
                    <div class="chart-title">Request Volume Trends</div>
                    <div class="chart-placeholder">
                        📈 Line Chart: Request volume over time<br>
                        <small>Shows hourly/daily patterns and peak usage times</small>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-title">Response Time Distribution</div>
                    <div class="chart-placeholder">
                        📊 Histogram: Response time distribution<br>
                        <small>Performance analysis and outlier detection</small>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-title">Geographic Distribution</div>
                    <div class="chart-placeholder">
                        🌍 World Map: User requests by region<br>
                        <small>Global traffic patterns and regional insights</small>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-title">Service Performance</div>
                    <div class="chart-placeholder">
                        🎯 Bar Chart: Service performance comparison<br>
                        <small>Uptime and reliability metrics by service</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Data Table -->
        <section class="data-table-section">
            <h2>📋 Detailed Data Table</h2>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Service</th>
                            <th>Endpoint</th>
                            <th>Response Time</th>
                            <th>Status</th>
                            <th>Region</th>
                            <th>User ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{ current_time or "2025-08-16 20:30:00" }}</td>
                            <td>API Gateway</td>
                            <td>/api/auth</td>
                            <td>42ms</td>
                            <td>200</td>
                            <td>us-west1</td>
                            <td>user_12345</td>
                        </tr>
                        <tr>
                            <td>{{ current_time or "2025-08-16 20:29:45" }}</td>
                            <td>Database</td>
                            <td>/api/data</td>
                            <td>67ms</td>
                            <td>200</td>
                            <td>us-west1</td>
                            <td>user_67890</td>
                        </tr>
                        <tr>
                            <td>{{ current_time or "2025-08-16 20:29:30" }}</td>
                            <td>Storage</td>
                            <td>/api/upload</td>
                            <td>89ms</td>
                            <td>200</td>
                            <td>us-central1</td>
                            <td>user_11111</td>
                        </tr>
                        <tr>
                            <td>{{ current_time or "2025-08-16 20:29:15" }}</td>
                            <td>Authentication</td>
                            <td>/api/login</td>
                            <td>34ms</td>
                            <td>200</td>
                            <td>us-east1</td>
                            <td>user_22222</td>
                        </tr>
                        <tr>
                            <td>{{ current_time or "2025-08-16 20:29:00" }}</td>
                            <td>API Gateway</td>
                            <td>/api/status</td>
                            <td>28ms</td>
                            <td>200</td>
                            <td>europe-west1</td>
                            <td>user_33333</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Export Section -->
        <section class="export-section">
            <button class="export-button" onclick="exportData('csv')">
                📥 Export CSV
            </button>
            <button class="export-button secondary" onclick="exportData('json')">
                📄 Export JSON
            </button>
            <button class="export-button secondary" onclick="exportData('pdf')">
                📋 Export PDF Report
            </button>
        </section>

        <!-- Navigation -->
        <div class="navigation">
            <a href="/" class="nav-button">🏠 Home</a>
            <a href="/monitoring" class="nav-button">📊 Monitoring</a>
            <a href="/status" class="nav-button">📈 Status</a>
            <a href="/knowledge-hub" class="nav-button">📚 Knowledge Hub</a>
        </div>
    </div>

    <script>
        // Modern data analytics functionality
        (function() {
            'use strict';

            class DataAnalytics {
                constructor() {
                    this.initializeAnalytics();
                    this.setupEventListeners();
                }

                initializeAnalytics() {
                    console.log('📈 Data Analytics initialized');
                    this.currentFilters = {
                        timeRange: '24h',
                        dataType: 'all',
                        region: 'all',
                        service: 'all'
                    };
                }

                setupEventListeners() {
                    // Filter change listeners
                    document.getElementById('timeRange')?.addEventListener('change', (e) => {
                        this.currentFilters.timeRange = e.target.value;
                    });
                    
                    document.getElementById('dataType')?.addEventListener('change', (e) => {
                        this.currentFilters.dataType = e.target.value;
                    });
                    
                    document.getElementById('region')?.addEventListener('change', (e) => {
                        this.currentFilters.region = e.target.value;
                    });
                    
                    document.getElementById('service')?.addEventListener('change', (e) => {
                        this.currentFilters.service = e.target.value;
                    });
                }

                async applyFilters() {
                    console.log('Applying filters:', this.currentFilters);
                    
                    // Show loading state
                    this.showLoadingState(true);
                    
                    try {
                        // Simulate API call with filters
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // Update metrics based on filters
                        this.updateMetricsWithFilters();
                        
                        // Show success notification
                        this.showNotification('Filters applied successfully!', 'success');
                        
                    } catch (error) {
                        console.error('Filter application failed:', error);
                        this.showNotification('Failed to apply filters', 'error');
                    } finally {
                        this.showLoadingState(false);
                    }
                }

                resetFilters() {
                    // Reset all filter values
                    document.getElementById('timeRange').value = '24h';
                    document.getElementById('dataType').value = 'all';
                    document.getElementById('region').value = 'all';
                    document.getElementById('service').value = 'all';
                    
                    this.currentFilters = {
                        timeRange: '24h',
                        dataType: 'all',
                        region: 'all',
                        service: 'all'
                    };
                    
                    // Reset metrics to default values
                    this.resetMetricsToDefault();
                    
                    this.showNotification('Filters reset to default', 'info');
                }

                updateMetricsWithFilters() {
                    // Simulate updating metrics based on filters
                    const metrics = [
                        { selector: '.metric-card:nth-child(1) .metric-value', value: '856K' },
                        { selector: '.metric-card:nth-child(2) .metric-value', value: '38ms' },
                        { selector: '.metric-card:nth-child(3) .metric-value', value: '99.9%' },
                        { selector: '.metric-card:nth-child(4) .metric-value', value: '32.1K' },
                        { selector: '.metric-card:nth-child(5) .metric-value', value: '1.8TB' },
                        { selector: '.metric-card:nth-child(6) .metric-value', value: '0.1%' }
                    ];

                    metrics.forEach(metric => {
                        const element = document.querySelector(metric.selector);
                        if (element) {
                            element.textContent = metric.value;
                        }
                    });
                }

                resetMetricsToDefault() {
                    const defaultMetrics = [
                        { selector: '.metric-card:nth-child(1) .metric-value', value: '1.2M' },
                        { selector: '.metric-card:nth-child(2) .metric-value', value: '45ms' },
                        { selector: '.metric-card:nth-child(3) .metric-value', value: '99.8%' },
                        { selector: '.metric-card:nth-child(4) .metric-value', value: '45.2K' },
                        { selector: '.metric-card:nth-child(5) .metric-value', value: '2.1TB' },
                        { selector: '.metric-card:nth-child(6) .metric-value', value: '0.2%' }
                    ];

                    defaultMetrics.forEach(metric => {
                        const element = document.querySelector(metric.selector);
                        if (element) {
                            element.textContent = metric.value;
                        }
                    });
                }

                showLoadingState(loading) {
                    const buttons = document.querySelectorAll('.filter-button');
                    buttons.forEach(btn => {
                        btn.disabled = loading;
                        if (loading) {
                            btn.textContent = '⏳ Processing...';
                        } else {
                            btn.textContent = btn.classList.contains('secondary') ? '🔄 Reset' : '🚀 Apply Filters';
                        }
                    });
                }

                showNotification(message, type = 'info') {
                    // Create toast notification
                    const toast = document.createElement('div');
                    toast.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: var(--bg-tertiary);
                        color: var(--text-primary);
                        padding: 1rem 1.5rem;
                        border-radius: 10px;
                        box-shadow: var(--shadow);
                        z-index: 1000;
                        transform: translateX(100%);
                        transition: var(--transition);
                        border: 1px solid ${type === 'success' ? 'var(--success-color)' : type === 'error' ? 'var(--error-color)' : 'var(--warning-color)'};
                    `;
                    toast.textContent = message;
                    
                    document.body.appendChild(toast);
                    
                    // Animate in
                    setTimeout(() => toast.style.transform = 'translateX(0)', 100);
                    
                    // Auto remove
                    setTimeout(() => {
                        toast.style.transform = 'translateX(100%)';
                        setTimeout(() => toast.remove(), 300);
                    }, 3000);
                }
            }

            // Initialize analytics
            let analytics;
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    analytics = new DataAnalytics();
                });
            } else {
                analytics = new DataAnalytics();
            }

            // Global functions
            window.applyFilters = function() {
                if (analytics) {
                    analytics.applyFilters();
                }
            };

            window.resetFilters = function() {
                if (analytics) {
                    analytics.resetFilters();
                }
            };

            window.exportData = function(format) {
                const message = `Exporting data as ${format.toUpperCase()}...`;
                if (analytics) {
                    analytics.showNotification(message, 'info');
                }
                
                // Simulate export process
                setTimeout(() => {
                    if (analytics) {
                        analytics.showNotification(`Data exported as ${format.toUpperCase()} successfully!`, 'success');
                    }
                }, 2000);
            };

            // Performance monitoring
            if ('performance' in window) {
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        const perfData = performance.getEntriesByType('navigation')[0];
                        if (perfData) {
                            console.log('📈 Analytics Load Performance:', {
                                'Load Time': `${Math.round(perfData.loadEventEnd - perfData.navigationStart)}ms`,
                                'DOM Ready': `${Math.round(perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart)}ms`
                            });
                        }
                    }, 0);
                });
            }

        })();
    </script>
</body>
</html>

