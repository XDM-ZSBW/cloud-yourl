<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yourl-Cloud Inc. - Beta Access</title>
    
    <!-- AI-Friendly Meta Tags -->
    <meta name="ai-service-entry-points" content="myl.zip">
    <meta name="ai-ethics-framework" content="myl.zip-standards">
    <meta name="description" content="Yourl-Cloud Inc. - Beta access for secure journaling tool. Privacy-first, browser-only journaling with automatic content erasure.">
    <meta name="session-id" content="f1d78acb-de07-46e0-bfa7-f5b75e3c0c49">
    <meta name="organization" content="Yourl-Cloud Inc.">
    <meta name="beta-status" content="closed-beta">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #0066cc;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }

        .beta-container {
            max-width: 600px;
            margin: 4rem auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .beta-header {
            background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .beta-content {
            padding: 2rem;
        }

        .beta-badge {
            background: var(--warning-color);
            color: #212529;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .form-control {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 1rem;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(0, 102, 204, 0.25);
        }

        .btn-beta {
            background: var(--primary-color);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-beta:hover {
            background: #0052a3;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 102, 204, 0.3);
        }

        .feature-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .feature-item:last-child {
            margin-bottom: 0;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }

        .alert-beta {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1.5rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .status-active {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="beta-container">
            <!-- Header -->
            <div class="beta-header">
                <div class="beta-badge">
                    <i class="fas fa-flask me-2"></i>CLOSED BETA
                </div>
                <h1><i class="fas fa-lock me-2"></i>Beta Access</h1>
                <p class="mb-0">Yourl-Cloud Inc. - Secure Journaling Tool</p>
            </div>

            <!-- Content -->
            <div class="beta-content">
                <div class="text-center mb-4">
                    <p class="lead">
                        Welcome to the closed beta of our secure journaling tool. 
                        This privacy-first journaling experience is available to invited users only.
                    </p>
                </div>

                <!-- Access Form -->
                <form id="beta-access-form">
                    <div class="mb-3">
                        <label for="invite-code" class="form-label">
                            <i class="fas fa-key me-2"></i>Invite Code
                        </label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="invite-code" 
                            placeholder="Enter your invite code (e.g., YOURL2024)"
                            required
                            autocomplete="off"
                        >
                        <div class="form-text">
                            Enter the invite code you received to access the beta journaling tool.
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-beta btn-primary">
                            <i class="fas fa-sign-in-alt me-2"></i>Access Beta
                        </button>
                    </div>
                </form>

                <!-- Features -->
                <div class="feature-list">
                    <h5><i class="fas fa-star me-2"></i>Beta Features</h5>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div>
                            <strong>Privacy-First Design</strong><br>
                            Your content never leaves your browser unless you explicitly save it
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <strong>3-Minute Timer</strong><br>
                            Automatic content erasure when timer expires or page loses focus
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <div>
                            <strong>Local Download</strong><br>
                            Save your journal entries to your device as text files
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div>
                            <strong>Secure Sessions</strong><br>
                            Encrypted sessions with automatic logout and content clearing
                        </div>
                    </div>
                </div>

                <!-- Privacy Notice -->
                <div class="alert-beta">
                    <h6><i class="fas fa-shield-alt me-2"></i>Privacy & Security</h6>
                    <ul class="mb-0">
                        <li><strong>No server storage:</strong> Your journal content never leaves your browser</li>
                        <li><strong>Automatic erasure:</strong> Content is cleared when timer expires or page loses focus</li>
                        <li><strong>Local processing:</strong> All journaling happens in your browser using JavaScript</li>
                        <li><strong>Beta status:</strong> This is a closed beta feature - please report any issues</li>
                    </ul>
                </div>

                <!-- Status -->
                <div class="text-center mt-4">
                    <span class="status-indicator status-active"></span>
                    <span class="text-muted">Beta system is operational</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        class BetaAccess {
            constructor() {
                this.form = document.getElementById('beta-access-form');
                this.inviteCodeInput = document.getElementById('invite-code');
                
                this.initialize();
            }

            initialize() {
                this.form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleAccess();
                });

                // Check if user already has beta access
                this.checkExistingAccess();
            }

            async checkExistingAccess() {
                try {
                    const response = await fetch('/api/beta/status', {
                        credentials: 'include'
                    });
                    
                    if (response.ok) {
                        // User already has access, redirect to journal
                        window.location.href = '/beta/journal';
                    }
                } catch (error) {
                    // User doesn't have access, continue with form
                    console.log('No existing beta access found');
                }
            }

            async handleAccess() {
                const inviteCode = this.inviteCodeInput.value.trim();
                
                if (!inviteCode) {
                    this.showError('Please enter an invite code');
                    return;
                }

                // Disable form
                this.form.querySelector('button[type="submit"]').disabled = true;
                this.form.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Checking Access...';

                try {
                    const response = await fetch('/api/beta/auth', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ inviteCode: inviteCode }),
                        credentials: 'include'
                    });

                    const data = await response.json();

                    if (response.ok) {
                        this.showSuccess('Beta access granted! Redirecting to journal...');
                        setTimeout(() => {
                            window.location.href = '/beta/journal';
                        }, 1500);
                    } else {
                        this.showError(data.message || 'Invalid invite code');
                    }
                } catch (error) {
                    this.showError('Network error. Please try again.');
                } finally {
                    // Re-enable form
                    this.form.querySelector('button[type="submit"]').disabled = false;
                    this.form.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-sign-in-alt me-2"></i>Access Beta';
                }
            }

            showError(message) {
                // Remove existing alerts
                const existingAlert = document.querySelector('.alert-danger');
                if (existingAlert) {
                    existingAlert.remove();
                }

                const alert = document.createElement('div');
                alert.className = 'alert alert-danger mt-3';
                alert.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>${message}`;
                
                this.form.appendChild(alert);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (alert.parentNode) {
                        alert.remove();
                    }
                }, 5000);
            }

            showSuccess(message) {
                // Remove existing alerts
                const existingAlert = document.querySelector('.alert-success');
                if (existingAlert) {
                    existingAlert.remove();
                }

                const alert = document.createElement('div');
                alert.className = 'alert alert-success mt-3';
                alert.innerHTML = `<i class="fas fa-check-circle me-2"></i>${message}`;
                
                this.form.appendChild(alert);
            }
        }

        // Initialize beta access when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const betaAccess = new BetaAccess();
        });
    </script>
</body>
</html>
